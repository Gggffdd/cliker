<!DOCTYPE html>
<html lang="ru" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>🎮 FG BOT - Premium Crypto Clicker</title>
    <meta name="description" content="Премиальный кликер с крипто-тематикой для Telegram. Зарабатывайте монеты, улучшайте клики и открывайте уникальные возможности!">
    <meta name="theme-color" content="#0f2027">
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    <!-- Preload critical resources -->
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" as="style" crossorigin="anonymous">
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" as="style" crossorigin="anonymous">
    <link rel="preload" href="https://telegram.org/js/telegram-web-app.js" as="script" crossorigin="anonymous">
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet" crossorigin="anonymous">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    
    <style>
        /* ===== CSS VARIABLES ===== */
        :root {
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --secondary-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --energy-gradient: linear-gradient(90deg, #4facfe 0%, #00f2fe 100%);
            --premium-gradient: linear-gradient(135deg, #ffd700 0%, #ff6b00 100%);
            --success-gradient: linear-gradient(135deg, #00b09b 0%, #96c93d 100%);
            --dark-bg: linear-gradient(135deg, #0f2027 0%, #203a43 50%, #2c5364 100%);
            
            --primary-color: #667eea;
            --secondary-color: #764ba2;
            --accent-color: #00f2fe;
            --text-primary: #ffffff;
            --text-secondary: #a0a0ff;
            --bg-primary: rgba(15, 23, 42, 0.95);
            --bg-secondary: rgba(25, 35, 60, 0.8);
            --border-color: rgba(79, 172, 254, 0.3);
            --shadow-color: rgba(0, 0, 0, 0.3);
            
            --border-radius: 20px;
            --border-radius-sm: 12px;
            --transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            --shadow: 0 10px 30px var(--shadow-color);
            --shadow-lg: 0 20px 50px rgba(0, 0, 0, 0.5);
        }

        /* ===== RESET & BASE STYLES ===== */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            -webkit-tap-highlight-color: transparent;
            user-select: none;
            -webkit-user-drag: none;
        }

        html {
            scroll-behavior: smooth;
            height: 100%;
        }

        body {
            font-family: 'Poppins', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: var(--dark-bg);
            color: var(--text-primary);
            text-align: center;
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
            padding: 20px;
            margin: 0;
            line-height: 1.6;
            font-weight: 400;
            background-attachment: fixed;
        }

        /* ===== DESKTOP BLOCKER ===== */
        .desktop-block {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.98);
            z-index: 10000;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 30px;
            backdrop-filter: blur(20px);
        }

        .desktop-block.show {
            display: flex;
            animation: fadeIn 0.8s ease-out;
        }

        .desktop-block h2 {
            color: var(--accent-color);
            font-size: 2.5rem;
            margin-bottom: 25px;
            font-weight: 700;
            text-shadow: 0 0 30px var(--accent-color);
        }

        .desktop-block p {
            color: var(--text-secondary);
            font-size: 1.3rem;
            max-width: 500px;
            margin-bottom: 30px;
            line-height: 1.8;
        }

        .desktop-block .qr-code {
            width: 200px;
            height: 200px;
            background: white;
            padding: 20px;
            border-radius: 20px;
            margin-bottom: 30px;
            box-shadow: var(--shadow-lg);
        }

        /* ===== BACKGROUND ELEMENTS ===== */
        .crypto-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            opacity: 0.6;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(102, 126, 234, 0.3) 0%, transparent 25%),
                radial-gradient(circle at 90% 70%, rgba(0, 242, 254, 0.3) 0%, transparent 25%),
                radial-gradient(circle at 50% 40%, rgba(245, 87, 108, 0.3) 0%, transparent 30%),
                radial-gradient(circle at 30% 80%, rgba(150, 201, 61, 0.2) 0%, transparent 25%);
            animation: crypto-bg-rotate 60s linear infinite;
        }

        @keyframes crypto-bg-rotate {
            0% { transform: rotate(0deg) scale(1); }
            50% { transform: rotate(180deg) scale(1.1); }
            100% { transform: rotate(360deg) scale(1); }
        }

        .crypto-particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            pointer-events: none;
            overflow: hidden;
        }

        .particle {
            position: absolute;
            background: var(--primary-color);
            border-radius: 50%;
            animation: float 20s infinite linear;
            opacity: 0;
        }

        @keyframes float {
            0% { 
                transform: translateY(110vh) translateX(0) rotate(0deg); 
                opacity: 0; 
            }
            10% { opacity: 0.7; }
            90% { opacity: 0.3; }
            100% { 
                transform: translateY(-100px) translateX(100px) rotate(360deg); 
                opacity: 0; 
            }
        }

        /* ===== MAIN CONTAINER ===== */
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: var(--bg-primary);
            border-radius: var(--border-radius);
            padding: 25px;
            box-shadow: var(--shadow);
            min-height: calc(100vh - 140px);
            position: relative;
            backdrop-filter: blur(10px);
            margin-bottom: 100px;
            border: 1px solid var(--border-color);
            animation: container-appear 0.8s ease-out;
        }

        @keyframes container-appear {
            from { 
                opacity: 0; 
                transform: translateY(30px) scale(0.95); 
            }
            to { 
                opacity: 1; 
                transform: translateY(0) scale(1); 
            }
        }

        /* ===== HEADER ===== */
        header {
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--border-color);
            position: relative;
            display: flex;
            justify-content: space-between;
            align-items: center;
            animation: header-slide 0.6s ease-out;
        }

        @keyframes header-slide {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            flex: 1;
            text-align: center;
            font-weight: 800;
            letter-spacing: -0.5px;
            text-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .settings-btn {
            background: rgba(102, 126, 234, 0.2);
            border: none;
            color: var(--primary-color);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            font-size: 1.3rem;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            position: absolute;
            right: 0;
            top: 0;
            backdrop-filter: blur(10px);
            border: 1px solid var(--border-color);
        }

        .settings-btn:hover {
            transform: rotate(90deg) scale(1.1);
            background: rgba(102, 126, 234, 0.3);
            box-shadow: 0 0 20px rgba(102, 126, 234, 0.4);
        }

        /* ===== STATS ===== */
        .stats {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            margin-bottom: 25px;
            gap: 15px;
            background: rgba(10, 15, 30, 0.7);
            border-radius: var(--border-radius);
            padding: 20px;
            border: 1px solid var(--border-color);
            backdrop-filter: blur(5px);
            animation: stats-appear 0.7s ease-out 0.2s both;
        }

        @keyframes stats-appear {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .stat-card {
            background: var(--bg-secondary);
            border-radius: var(--border-radius-sm);
            padding: 20px;
            min-width: 140px;
            border: 1px solid var(--border-color);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            transition: var(--transition);
            backdrop-filter: blur(5px);
            flex: 1;
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--primary-gradient);
        }

        .stat-card:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.25);
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--accent-color);
            margin-top: 8px;
            text-shadow: 0 0 10px rgba(0, 242, 254, 0.3);
        }

        /* ===== CLICKER SECTION ===== */
        #coin-container {
            position: relative;
            width: 300px;
            height: 300px;
            margin: 30px auto;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            -webkit-tap-highlight-color: transparent;
            animation: coin-container-appear 0.8s ease-out 0.4s both;
        }

        @keyframes coin-container-appear {
            from { opacity: 0; transform: scale(0.8) rotate(-180deg); }
            to { opacity: 1; transform: scale(1) rotate(0); }
        }

        #coin {
            width: 250px;
            height: 250px;
            border-radius: 50%;
            position: relative;
            transition: var(--transition);
            transform: scale(1);
            z-index: 2;
            cursor: pointer;
            box-shadow: 
                0 0 60px rgba(102, 126, 234, 0.6),
                inset 0 0 60px rgba(255, 255, 255, 0.1);
            background: 
                radial-gradient(circle at 30% 30%, #ffd700, #daa520 40%, #b8860b 70%),
                url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" font-size="40" fill="rgba(255,255,255,0.9)" font-weight="bold">FG</text></svg>') center/cover no-repeat;
            border: 15px solid #ffd700;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 4rem;
            color: rgba(255, 255, 255, 0.95);
            font-weight: 800;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        #coin::before {
            content: '';
            position: absolute;
            top: -10px;
            left: -10px;
            right: -10px;
            bottom: -10px;
            border-radius: 50%;
            background: conic-gradient(from 0deg, #ffd700, #ffed4e, #ffd700, #daa520, #ffd700);
            z-index: -1;
            animation: coin-glow 3s linear infinite;
            filter: blur(15px);
            opacity: 0.7;
        }

        @keyframes coin-glow {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        #coin:hover {
            transform: scale(1.08) rotate(5deg);
            box-shadow: 
                0 0 80px rgba(102, 126, 234, 0.8),
                inset 0 0 80px rgba(255, 255, 255, 0.15);
        }

        #coin:active {
            transform: scale(0.95) rotate(15deg);
        }

        @keyframes coin-pulse {
            0% { transform: scale(1); box-shadow: 0 0 60px rgba(102, 126, 234, 0.6); }
            50% { transform: scale(1.05); box-shadow: 0 0 80px rgba(102, 126, 234, 0.8); }
            100% { transform: scale(1); box-shadow: 0 0 60px rgba(102, 126, 234, 0.6); }
        }

        #coin.pulse {
            animation: coin-pulse 2s infinite;
        }

        #coin-shadow {
            position: absolute;
            bottom: 20px;
            width: 200px;
            height: 50px;
            background: rgba(0, 0, 0, 0.4);
            border-radius: 50%;
            filter: blur(20px);
            z-index: 1;
            transition: var(--transition);
        }

        .coin-click {
            position: absolute;
            color: var(--accent-color);
            font-weight: 800;
            font-size: 2rem;
            pointer-events: none;
            animation: float-up 1.8s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.8);
            z-index: 1000;
            font-family: 'Poppins', sans-serif;
        }

        .critical {
            color: #ff6b6b;
            text-shadow: 
                0 0 20px rgba(255, 107, 107, 0.8),
                0 0 40px rgba(255, 107, 107, 0.6);
            font-size: 2.5rem;
            font-weight: 900;
        }

        @keyframes float-up {
            0% { 
                transform: translate(-50%, -50%) scale(1); 
                opacity: 1; 
            }
            100% { 
                transform: translate(-50%, -200px) scale(0.3); 
                opacity: 0; 
            }
        }

        /* ===== ENERGY SYSTEM ===== */
        .energy-container {
            margin-top: 30px;
            padding: 0 20px;
            animation: energy-appear 0.7s ease-out 0.6s both;
        }

        @keyframes energy-appear {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .energy-bar {
            width: 100%;
            height: 25px;
            background: rgba(0, 0, 0, 0.4);
            border-radius: 15px;
            overflow: hidden;
            position: relative;
            border: 2px solid var(--border-color);
        }

        .energy-fill {
            height: 100%;
            background: var(--energy-gradient);
            border-radius: 12px;
            transition: width 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            position: relative;
            overflow: hidden;
        }

        .energy-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            animation: energy-shine 2s infinite;
        }

        @keyframes energy-shine {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        .energy-text {
            margin-top: 10px;
            font-size: 1rem;
            color: var(--text-secondary);
            font-weight: 500;
        }

        /* ===== BOTTOM NAVIGATION ===== */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(15, 23, 42, 0.98);
            padding: 12px;
            z-index: 1000;
            box-shadow: 0 -10px 30px rgba(0, 0, 0, 0.4);
            border-top: 1px solid var(--border-color);
            backdrop-filter: blur(20px);
            animation: nav-slide 0.6s ease-out;
        }

        @keyframes nav-slide {
            from { transform: translateY(100%); }
            to { transform: translateY(0); }
        }

        .tabs {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 5px;
            max-width: 800px;
            margin: 0 auto;
        }

        .tab {
            flex: 1;
            padding: 12px 0;
            cursor: pointer;
            border-radius: var(--border-radius-sm);
            transition: var(--transition);
            font-weight: 600;
            min-width: 90px;
            margin: 2px;
            background: transparent;
            color: var(--text-secondary);
            font-size: 0.85rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            overflow: hidden;
        }

        .tab::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            width: 0;
            height: 3px;
            background: var(--primary-gradient);
            transition: var(--transition);
            transform: translateX(-50%);
        }

        .tab.active {
            color: var(--text-primary);
            background: rgba(102, 126, 234, 0.15);
        }

        .tab.active::before {
            width: 80%;
        }

        .tab:hover:not(.active) {
            background: rgba(102, 126, 234, 0.1);
            transform: translateY(-2px);
        }

        .tab i {
            margin-bottom: 6px;
            font-size: 1.3rem;
            transition: var(--transition);
        }

        .tab.active i {
            transform: scale(1.2);
        }

        /* ===== TAB CONTENT ===== */
        .tab-content {
            display: none;
            animation: fadeInUp 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            padding-top: 20px;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* ===== SECTIONS ===== */
        .section {
            padding: 25px;
            background: var(--bg-secondary);
            border-radius: var(--border-radius);
            margin-top: 20px;
            border: 1px solid var(--border-color);
            backdrop-filter: blur(10px);
            animation: section-appear 0.6s ease-out;
        }

        @keyframes section-appear {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }

        .section h3 {
            font-size: 1.5rem;
            margin-bottom: 15px;
            color: var(--accent-color);
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .section p {
            color: var(--text-secondary);
            margin-bottom: 20px;
            line-height: 1.7;
        }

        /* ===== QUESTS & UPGRADES ===== */
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 25px;
        }

        .card {
            background: rgba(30, 40, 70, 0.8);
            border-radius: var(--border-radius-sm);
            padding: 25px;
            border: 2px solid #4a5fc1;
            transition: var(--transition);
            text-align: center;
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(5px);
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--primary-gradient);
        }

        .card.completed {
            border-color: var(--accent-color);
            background: rgba(0, 242, 254, 0.1);
        }

        .card.premium {
            border-color: #ffd700;
            background: rgba(255, 215, 0, 0.1);
        }

        .card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        .card i {
            font-size: 3rem;
            color: var(--primary-color);
            margin-bottom: 20px;
            transition: var(--transition);
        }

        .card:hover i {
            transform: scale(1.2) rotate(10deg);
        }

        .card h4 {
            font-size: 1.3rem;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .card p {
            font-size: 0.95rem;
            color: var(--text-secondary);
            margin-bottom: 20px;
            min-height: 80px;
            line-height: 1.6;
        }

        .reward {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: 15px;
            font-weight: 700;
            color: var(--accent-color);
            font-size: 1.1rem;
        }

        .reward i {
            margin: 0 8px 0 0;
            font-size: 1.2rem;
        }

        /* ===== BUTTONS ===== */
        .btn {
            background: var(--primary-gradient);
            border: none;
            color: white;
            padding: 15px 30px;
            border-radius: 50px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            margin: 8px;
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
            font-size: 1rem;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.5s;
        }

        .btn:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 15px 35px rgba(102, 126, 234, 0.6);
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn:active {
            transform: translateY(2px) scale(0.98);
        }

        .btn:disabled {
            background: rgba(100, 100, 100, 0.5);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .btn:disabled:hover::before {
            left: -100%;
        }

        .btn i {
            font-size: 1.1rem;
        }

        .btn-telegram {
            background: linear-gradient(135deg, #0088cc, #00aced);
        }

        .btn-chat {
            background: var(--success-gradient);
        }

        .btn-upgrade {
            background: linear-gradient(135deg, #9c27b0, #673ab7);
        }

        .btn-premium {
            background: var(--premium-gradient);
            color: #333;
        }

        .btn-daily {
            background: var(--secondary-gradient);
        }

        /* ===== DAILY REWARDS ===== */
        .daily-rewards {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 25px;
        }

        .reward-day {
            background: var(--bg-secondary);
            border-radius: var(--border-radius-sm);
            padding: 20px 15px;
            width: 90px;
            height: 120px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border: 3px solid #4a5fc1;
            margin: 5px;
            transition: var(--transition);
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            position: relative;
            overflow: hidden;
        }

        .reward-day::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--primary-gradient);
            transform: scaleX(0);
            transition: var(--transition);
        }

        .reward-day.active {
            border-color: var(--primary-color);
            background: rgba(102, 126, 234, 0.2);
            transform: translateY(-8px);
        }

        .reward-day.active::before {
            transform: scaleX(1);
        }

        .reward-day.claimed {
            border-color: var(--accent-color);
            background: rgba(0, 242, 254, 0.2);
        }

        .reward-day i {
            font-size: 1.8rem;
            margin-bottom: 15px;
            color: var(--primary-color);
            transition: var(--transition);
        }

        .reward-day.active:hover {
            transform: translateY(-12px) scale(1.05);
            box-shadow: 0 15px 30px rgba(102, 126, 234, 0.4);
        }

        .reward-day.active:hover i {
            transform: scale(1.2) rotate(15deg);
        }

        .reward-amount {
            font-weight: 700;
            color: var(--accent-color);
            font-size: 1.1rem;
        }

        /* ===== PREMIUM SHOP ===== */
        .star-balance {
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 25px 0;
            font-size: 1.8rem;
            font-weight: 800;
            color: #ffd700;
            text-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
        }

        .star-balance i {
            margin-right: 15px;
            color: #ffd700;
            text-shadow: 0 0 15px rgba(255, 215, 0, 0.7);
            animation: star-pulse 2s infinite;
        }

        @keyframes star-pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }

        .shop-items {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 25px;
        }

        .shop-item {
            background: rgba(35, 45, 75, 0.9);
            border-radius: var(--border-radius-sm);
            padding: 25px 20px;
            border: 2px solid #ffb300;
            transition: var(--transition);
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .shop-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: var(--premium-gradient);
        }

        .shop-item:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 20px 40px rgba(255, 179, 0, 0.3);
        }

        .shop-item h4 {
            font-size: 1.2rem;
            margin-bottom: 15px;
            color: #ffb300;
            font-weight: 600;
        }

        .shop-item .price {
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 20px 0;
            font-weight: 700;
            color: #ffd700;
            font-size: 1.3rem;
        }

        .shop-item .price i {
            margin-right: 8px;
            color: #ffd700;
        }

        .shop-item .item-desc {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 20px;
            min-height: 80px;
            line-height: 1.6;
        }

        /* ===== MODALS ===== */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 2000;
            backdrop-filter: blur(10px);
            justify-content: center;
            align-items: center;
            opacity: 0;
            transition: opacity 0.4s ease;
            padding: 20px;
        }

        .modal.active {
            display: flex;
            opacity: 1;
            animation: modal-appear 0.4s ease;
        }

        @keyframes modal-appear {
            from { opacity: 0; backdrop-filter: blur(0); }
            to { opacity: 1; backdrop-filter: blur(10px); }
        }

        .modal-content {
            background: var(--bg-primary);
            width: 90%;
            max-width: 500px;
            border-radius: var(--border-radius);
            padding: 35px;
            box-shadow: var(--shadow-lg);
            position: relative;
            transform: translateY(30px) scale(0.95);
            transition: transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            border: 1px solid var(--border-color);
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal.active .modal-content {
            transform: translateY(0) scale(1);
        }

        .close-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background: transparent;
            border: none;
            color: var(--text-secondary);
            font-size: 1.8rem;
            cursor: pointer;
            transition: var(--transition);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .close-btn:hover {
            color: #ff6b6b;
            transform: scale(1.2) rotate(90deg);
            background: rgba(255, 107, 107, 0.1);
        }

        .modal-title {
            color: var(--accent-color);
            margin-bottom: 25px;
            font-size: 1.8rem;
            text-align: center;
            font-weight: 700;
        }

        /* ===== SETTINGS ===== */
        .setting-group {
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--border-color);
        }

        .setting-group:last-child {
            border-bottom: none;
        }

        .setting-label {
            display: block;
            margin-bottom: 12px;
            font-weight: 600;
            color: var(--text-primary);
            text-align: left;
            font-size: 1.1rem;
        }

        .language-select, .promo-input {
            width: 100%;
            padding: 15px;
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius-sm);
            color: var(--text-primary);
            font-size: 1rem;
            margin-bottom: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            transition: var(--transition);
        }

        .language-select:focus, .promo-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.3);
        }

        .promo-btn {
            background: var(--primary-gradient);
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: var(--border-radius-sm);
            cursor: pointer;
            font-weight: 600;
            width: 100%;
            transition: var(--transition);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
        }

        .promo-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 30px rgba(102, 126, 234, 0.6);
        }

        .reset-btn {
            background: linear-gradient(135deg, #ff6b6b, #ff4757);
            color: white;
            border: none;
            padding: 18px;
            border-radius: var(--border-radius-sm);
            cursor: pointer;
            font-weight: 600;
            width: 100%;
            transition: var(--transition);
            margin-top: 15px;
            box-shadow: 0 8px 25px rgba(255, 107, 107, 0.4);
        }

        .reset-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 30px rgba(255, 107, 107, 0.6);
        }

        .promo-result {
            margin-top: 15px;
            padding: 15px;
            border-radius: var(--border-radius-sm);
            display: none;
            font-size: 1rem;
            text-align: center;
            font-weight: 500;
        }

        .promo-success {
            background: rgba(0, 242, 254, 0.2);
            border: 1px solid var(--accent-color);
            color: var(--accent-color);
        }

        .promo-error {
            background: rgba(255, 107, 107, 0.2);
            border: 1px solid #ff6b6b;
            color: #ff6b6b;
        }

        /* ===== NOTIFICATIONS ===== */
        .notification {
            position: fixed;
            top: 30px;
            left: 50%;
            transform: translateX(-50%) translateY(-100px);
            background: var(--bg-primary);
            color: var(--accent-color);
            padding: 18px 30px;
            border-radius: 50px;
            box-shadow: var(--shadow-lg);
            z-index: 3000;
            opacity: 0;
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            font-weight: 600;
            border: 1px solid var(--border-color);
            backdrop-filter: blur(10px);
            max-width: 90%;
            text-align: center;
        }

        .notification.show {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
        }

        .save-notice {
            position: fixed;
            bottom: 120px;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: var(--bg-primary);
            color: var(--accent-color);
            padding: 15px 25px;
            border-radius: 50px;
            box-shadow: var(--shadow);
            z-index: 3000;
            opacity: 0;
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            font-weight: 600;
            border: 1px solid var(--border-color);
            backdrop-filter: blur(10px);
        }

        .save-notice.show {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
        }

        /* ===== LOADING STATES ===== */
        .loading {
            position: relative;
            overflow: hidden;
        }

        .loading::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            animation: loading 1.5s infinite;
        }

        @keyframes loading {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        /* ===== RESPONSIVE DESIGN ===== */
        @media (max-width: 768px) {
            .container {
                padding: 20px;
                border-radius: 15px;
                margin-bottom: 120px;
            }
            
            .stats {
                flex-direction: row;
                align-items: center;
                padding: 15px;
                gap: 10px;
            }
            
            .stat-card {
                width: 30%;
                min-width: auto;
                padding: 15px 10px;
            }
            
            .stat-value {
                font-size: 1.4rem;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            .tabs {
                flex-wrap: wrap;
            }
            
            .tab {
                flex: 0 0 30%;
                margin-bottom: 8px;
                min-width: 70px;
                padding: 10px 0;
                font-size: 0.75rem;
            }
            
            #coin-container {
                width: 250px;
                height: 250px;
            }
            
            #coin {
                width: 200px;
                height: 200px;
                font-size: 3rem;
                border-width: 12px;
            }
            
            .grid {
                grid-template-columns: 1fr;
            }
            
            .daily-rewards {
                gap: 10px;
            }
            
            .reward-day {
                width: 70px;
                height: 100px;
                padding: 15px 10px;
            }
            
            .shop-items {
                grid-template-columns: 1fr;
            }
            
            .modal-content {
                padding: 25px;
            }
            
            .btn {
                padding: 12px 20px;
                font-size: 0.9rem;
            }
        }

        @media (max-width: 480px) {
            body {
                padding: 15px;
            }
            
            .container {
                padding: 15px;
                margin-bottom: 140px;
            }
            
            .stat-card {
                width: 45%;
                margin-bottom: 10px;
            }
            
            .tab {
                flex: 0 0 45%;
                font-size: 0.7rem;
            }
            
            #coin-container {
                width: 220px;
                height: 220px;
            }
            
            #coin {
                width: 180px;
                height: 180px;
                font-size: 2.5rem;
            }
            
            .section {
                padding: 20px;
            }
        }

        /* ===== ACCESSIBILITY ===== */
        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }

        /* ===== DARK MODE SUPPORT ===== */
        @media (prefers-color-scheme: dark) {
            :root {
                --bg-primary: rgba(10, 15, 30, 0.95);
                --bg-secondary: rgba(20, 25, 45, 0.8);
            }
        }

        /* ===== PRINT STYLES ===== */
        @media print {
            .bottom-nav, .settings-btn, .btn {
                display: none !important;
            }
            
            body {
                background: white !important;
                color: black !important;
            }
        }
    </style>
</head>
<body>
    <!-- Desktop Blocker -->
    <div class="desktop-block" id="desktop-block">
        <div class="qr-code">
            <!-- QR Code placeholder -->
            <div style="width:100%;height:100%;background:#f0f0f0;display:flex;align-items:center;justify-content:center;color:#333;font-weight:bold;">
                Scan QR Code
            </div>
        </div>
        <h2>🚀 FG BOT</h2>
        <p>Откройте в Telegram для наилучшего игрового опыта с полной интеграцией и бонусами!</p>
        <p style="color: var(--accent-color); font-weight: 600;">👇 Наведите камеру на QR-код или нажмите кнопку ниже</p>
        <button class="btn" onclick="window.open('https://t.me/your_bot_username', '_blank')">
            <i class="fab fa-telegram"></i> Открыть в Telegram
        </button>
    </div>
    
    <!-- Animated Background -->
    <div class="crypto-bg"></div>
    <div class="crypto-particles" id="crypto-particles"></div>
    
    <!-- Main Container -->
    <div class="container">
        <header>
            <h1><i class="fas fa-coins"></i> FG BOT</h1>
            <button class="settings-btn" id="settings-btn" aria-label="Настройки">
                <i class="fas fa-cog"></i>
            </button>
        </header>
        
        <!-- Stats Dashboard -->
        <div class="stats" id="stats-container">
            <div class="stat-card">
                <div><i class="fas fa-coins"></i> <span class="lang-coins">Монеты</span></div>
                <div class="stat-value" id="coins">0</div>
            </div>
            <div class="stat-card">
                <div><i class="fas fa-mouse-pointer"></i> <span class="lang-per-click">За клик</span></div>
                <div class="stat-value" id="per-click">1</div>
            </div>
            <div class="stat-card">
                <div><i class="fas fa-star"></i> <span class="lang-stars">Звёзды</span></div>
                <div class="stat-value" id="stars">0</div>
            </div>
        </div>
        
        <!-- Clicker Tab -->
        <div id="clicker" class="tab-content active">
            <div id="coin-container">
                <div id="coin" class="pulse">FG</div>
                <div id="coin-shadow"></div>
            </div>
            
            <div class="energy-container">
                <div class="energy-bar">
                    <div class="energy-fill" id="energy-fill" style="width: 100%;"></div>
                </div>
                <div class="energy-text" id="energy-text">1000/1000</div>
            </div>
            
            <div class="section">
                <h3><i class="fas fa-chart-line"></i> Статистика</h3>
                <div class="grid">
                    <div class="card">
                        <i class="fas fa-bolt"></i>
                        <h4>Критические удары</h4>
                        <p>Шанс получить двойное количество монет за клик</p>
                        <div class="reward">
                            <span id="critical-hits">0</span> раз
                        </div>
                    </div>
                    <div class="card">
                        <i class="fas fa-trophy"></i>
                        <h4>Общий доход</h4>
                        <p>Всего заработано монет за всё время игры</p>
                        <div class="reward">
                            <span id="total-coins">0</span> монет
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Quests Tab -->
        <div id="quests" class="tab-content">
            <div class="section">
                <h3><i class="fas fa-tasks"></i> <span class="lang-quests-title">Система заданий</span></h3>
                <p class="lang-quests-desc">Выполняйте задания, чтобы получать эксклюзивные бонусы и ускорить прогресс</p>
                
                <div class="grid">
                    <div class="card" id="telegram-quest">
                        <i class="fab fa-telegram"></i>
                        <h4 class="lang-quest1">Подписка на Telegram</h4>
                        <p class="lang-quest1-desc">Подпишитесь на наш канал и получите бонусные монеты для старта</p>
                        <button class="btn btn-telegram" id="telegram-btn">
                            <i class="fab fa-telegram"></i> <span class="lang-join-telegram">Присоединиться</span>
                        </button>
                        <div class="reward">
                            <i class="fas fa-coins"></i> <span>+500 монет</span>
                        </div>
                    </div>
                    <div class="card" id="chat-quest">
                        <i class="fas fa-comments"></i>
                        <h4 class="lang-quest2">Вход в чат</h4>
                        <p class="lang-quest2-desc">Присоединитесь к нашему чату и получите эксклюзивный бонус</p>
                        <button class="btn btn-chat" id="chat-btn">
                            <i class="fas fa-comments"></i> <span class="lang-join-chat">Войти в чат</span>
                        </button>
                        <div class="reward">
                            <i class="fas fa-coins"></i> <span>+1000 монет</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Bonuses Tab -->
        <div id="bonuses" class="tab-content">
            <div class="section">
                <h3><i class="fas fa-calendar-day"></i> <span class="lang-daily-title">Ежедневные награды</span></h3>
                <p class="lang-daily-desc">Заходите ежедневно, чтобы получать увеличивающиеся награды! Серия сбрасывается через 5 дней.</p>
                
                <div class="daily-rewards">
                    <div class="reward-day" id="day1">
                        <i class="fas fa-coins"></i>
                        <div class="reward-amount">100</div>
                        <small>День 1</small>
                    </div>
                    <div class="reward-day" id="day2">
                        <i class="fas fa-coins"></i>
                        <div class="reward-amount">250</div>
                        <small>День 2</small>
                    </div>
                    <div class="reward-day" id="day3">
                        <i class="fas fa-coins"></i>
                        <div class="reward-amount">500</div>
                        <small>День 3</small>
                    </div>
                    <div class="reward-day" id="day4">
                        <i class="fas fa-coins"></i>
                        <div class="reward-amount">1000</div>
                        <small>День 4</small>
                    </div>
                    <div class="reward-day" id="day5">
                        <i class="fas fa-gem"></i>
                        <div class="reward-amount">2000</div>
                        <small>День 5</small>
                    </div>
                </div>
                
                <p id="daily-status" class="lang-daily-available" style="margin: 20px 0; font-size: 1.1rem; font-weight: 500;">Сегодняшняя награда доступна!</p>
                <button class="btn btn-daily" id="daily-btn">
                    <i class="fas fa-gift"></i> <span class="lang-claim-daily">Получить награду</span>
                </button>
            </div>
        </div>
        
        <!-- Upgrades Tab -->
        <div id="upgrades" class="tab-content">
            <div class="section">
                <h3><i class="fas fa-arrow-up"></i> <span class="lang-upgrades-title">Улучшения</span></h3>
                <p class="lang-upgrades-desc">Улучшайте свои возможности для максимального увеличения дохода и эффективности</p>
                
                <div class="grid">
                    <div class="card" id="click-upgrade">
                        <i class="fas fa-hand-pointer"></i>
                        <h4 class="lang-upgrade1">Улучшение клика</h4>
                        <p class="lang-upgrade1-desc">Увеличивает количество монет, получаемых за каждый клик по основной монете</p>
                        <div class="reward">
                            <i class="fas fa-coins"></i> <span id="click-upgrade-cost">1,500</span> монет
                        </div>
                        <div class="reward">
                            +<span id="click-upgrade-effect">1</span> монет за клик
                        </div>
                        <button class="btn btn-upgrade" id="buy-click-btn">
                            <i class="fas fa-shopping-cart"></i> <span class="lang-buy-upgrade">Купить улучшение</span>
                        </button>
                    </div>
                    
                    <div class="card" id="auto-clicker">
                        <i class="fas fa-robot"></i>
                        <h4 class="lang-upgrade2">Автокликер</h4>
                        <p class="lang-upgrade2-desc">Автоматически кликает за вас каждую секунду, даже когда приложение закрыто</p>
                        <div class="reward">
                            <i class="fas fa-coins"></i> <span id="auto-clicker-cost">15,000</span> монет
                        </div>
                        <div class="reward">
                            +<span id="auto-clicker-effect">1</span> клик/сек
                        </div>
                        <button class="btn btn-upgrade" id="buy-auto-btn">
                            <i class="fas fa-shopping-cart"></i> <span class="lang-buy-upgrade">Купить улучшение</span>
                        </button>
                    </div>
                    
                    <div class="card" id="critical-upgrade">
                        <i class="fas fa-bolt"></i>
                        <h4 class="lang-upgrade3">Критический удар</h4>
                        <p class="lang-upgrade3-desc">Увеличивает шанс получить двойные монеты за каждый клик по монете</p>
                        <div class="reward">
                            <i class="fas fa-coins"></i> <span id="critical-upgrade-cost">7,500</span> монет
                        </div>
                        <div class="reward">
                            <span id="critical-upgrade-effect">1</span>% шанс крита
                        </div>
                        <button class="btn btn-upgrade" id="buy-critical-btn">
                            <i class="fas fa-shopping-cart"></i> <span class="lang-buy-upgrade">Купить улучшение</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Premium Tab -->
        <div id="premium" class="tab-content">
            <div class="section">
                <h3><i class="fas fa-star"></i> <span class="lang-premium-shop">Магазин Звёзд</span></h3>
                <p class="lang-premium-desc">Покупайте уникальные предметы и мощные улучшения за звёзды из Telegram</p>
                
                <div class="star-balance">
                    <i class="fas fa-star"></i> 
                    <span id="tg-stars-balance">0</span> звёзд
                </div>
                
                <div class="shop-items">
                    <div class="shop-item" data-id="tap-multiplier" data-price="50">
                        <i class="fas fa-sync-alt"></i>
                        <h4 class="lang-item1">Множитель тапа x2</h4>
                        <div class="item-desc lang-item1-desc">Удваивает доход за каждый клик навсегда. Незаменимо для быстрого прогресса!</div>
                        <div class="price">
                            <i class="fas fa-star"></i> 50 звёзд
                        </div>
                        <button class="btn btn-premium buy-item">
                            <i class="fas fa-shopping-cart"></i> <span class="lang-buy">Купить</span>
                        </button>
                    </div>
                    
                    <div class="shop-item" data-id="gold-pack" data-price="20">
                        <i class="fas fa-coins"></i>
                        <h4 class="lang-item2">Золотой пакет</h4>
                        <div class="item-desc lang-item2-desc">Мгновенно получайте +50,000 монет для быстрого прокачки улучшений</div>
                        <div class="price">
                            <i class="fas fa-star"></i> 20 звёзд
                        </div>
                        <button class="btn btn-premium buy-item">
                            <i class="fas fa-shopping-cart"></i> <span class="lang-buy">Купить</span>
                        </button>
                    </div>
                    
                    <div class="shop-item" data-id="energy-boost" data-price="30">
                        <i class="fas fa-gem"></i>
                        <h4 class="lang-item3">Бриллиантовая энергия</h4>
                        <div class="item-desc lang-item3-desc">Бесконечная энергия на 24 часа - кликайте без ограничений целые сутки!</div>
                        <div class="price">
                            <i class="fas fa-star"></i> 30 звёзд
                        </div>
                        <button class="btn btn-premium buy-item">
                            <i class="fas fa-shopping-cart"></i> <span class="lang-buy">Купить</span>
                        </button>
                    </div>
                    
                    <div class="shop-item" data-id="click-booster" data-price="25">
                        <i class="fas fa-bolt"></i>
                        <h4 class="lang-item4">Бустер кликов</h4>
                        <div class="item-desc lang-item4-desc">+10 монет за клик на 12 часов. Идеально для быстрого заработка!</div>
                        <div class="price">
                            <i class="fas fa-star"></i> 25 звёзд
                        </div>
                        <button class="btn btn-premium buy-item">
                            <i class="fas fa-shopping-cart"></i> <span class="lang-buy">Купить</span>
                        </button>
                    </div>
                    
                    <div class="shop-item" data-id="protection" data-price="40">
                        <i class="fas fa-shield-alt"></i>
                        <h4 class="lang-item5">Защита от потерь</h4>
                        <div class="item-desc lang-item5-desc">Сохранение прогресса при сбросе игры. Ваши инвестиции в безопасности!</div>
                        <div class="price">
                            <i class="fas fa-star"></i> 40 звёзд
                        </div>
                        <button class="btn btn-premium buy-item">
                            <i class="fas fa-shopping-cart"></i> <span class="lang-buy">Купить</span>
                        </button>
                    </div>
                    
                    <div class="shop-item" data-id="auto-clicker-pro" data-price="60">
                        <i class="fas fa-robot"></i>
                        <h4 class="lang-item6">Профессиональный кликер</h4>
                        <div class="item-desc lang-item6-desc">+5 автокликеров навсегда. Пассивный доход на максимальном уровне!</div>
                        <div class="price">
                            <i class="fas fa-star"></i> 60 звёзд
                        </div>
                        <button class="btn btn-premium buy-item">
                            <i class="fas fa-shopping-cart"></i> <span class="lang-buy">Купить</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Bottom Navigation -->
    <div class="bottom-nav">
        <div class="tabs">
            <div class="tab active" data-tab="clicker">
                <i class="fas fa-hand-pointer"></i> <span class="lang-tab-clicker">Кликер</span>
            </div>
            <div class="tab" data-tab="quests">
                <i class="fas fa-tasks"></i> <span class="lang-tab-quests">Задания</span>
            </div>
            <div class="tab" data-tab="bonuses">
                <i class="fas fa-gift"></i> <span class="lang-tab-bonuses">Бонусы</span>
            </div>
            <div class="tab" data-tab="upgrades">
                <i class="fas fa-arrow-up"></i> <span class="lang-tab-upgrades">Улучшения</span>
            </div>
            <div class="tab" data-tab="premium">
                <i class="fas fa-star"></i> <span class="lang-tab-premium">Звёзды</span>
            </div>
        </div>
    </div>
    
    <!-- Settings Modal -->
    <div class="modal" id="settings-modal">
        <div class="modal-content">
            <button class="close-btn" id="close-settings" aria-label="Закрыть настройки">
                <i class="fas fa-times"></i>
            </button>
            <h2 class="modal-title"><i class="fas fa-cog"></i> <span class="lang-settings-title">Настройки</span></h2>
            
            <div class="setting-group">
                <label class="setting-label lang-language-label">Язык интерфейса:</label>
                <select class="language-select" id="language-select">
                    <option value="ru">Русский 🇷🇺</option>
                    <option value="en">English 🇺🇸</option>
                </select>
            </div>
            
            <div class="setting-group">
                <label class="setting-label lang-sound-label">Звуковые эффекты:</label>
                <div style="display: flex; gap: 15px; margin-top: 10px;">
                    <button class="btn" id="sound-on" style="flex: 1;">Включить</button>
                    <button class="btn" id="sound-off" style="flex: 1;">Выключить</button>
                </div>
            </div>
            
            <div class="setting-group">
                <label class="setting-label lang-promo-label">Активация промокода:</label>
                <input type="text" class="promo-input" id="promo-input" placeholder="Введите промокод...">
                <button class="promo-btn" id="promo-btn"><span class="lang-activate-promo">Активировать промокод</span></button>
                <div class="promo-result" id="promo-result"></div>
            </div>
            
            <div class="setting-group">
                <button class="reset-btn" id="reset-btn">
                    <i class="fas fa-redo"></i> <span class="lang-reset-game">Сбросить игру</span>
                </button>
            </div>
            
            <div class="setting-group">
                <div style="text-align: center; margin-top: 20px; color: var(--text-secondary); font-size: 0.9rem;">
                    <p>FG BOT v2.0.0</p>
                    <p>© 2024 Все права защищены</p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Notifications -->
    <div class="notification" id="notification"></div>
    <div class="save-notice" id="save-notice"><span class="lang-game-saved">Игра сохранена!</span></div>

    <!-- JavaScript -->
    <script>
        // ===== PREMIUM GAME ENGINE =====
        
        // Game State Management
        class GameState {
            constructor() {
                this.coins = 0;
                this.perClick = 1;
                this.level = 1;
                this.lastDailyReward = 0;
                this.currentDay = 0;
                this.criticalHits = 0;
                this.totalCoins = 0;
                this.lastSave = Date.now();
                this.language = 'ru';
                this.usedPromoCodes = [];
                this.tapMultiplier = 1;
                this.telegramStars = 0;
                this.soundEnabled = true;
                
                // Energy System
                this.energy = 1000;
                this.maxEnergy = 1000;
                this.lastEnergyUpdate = Date.now();
                
                // Quests
                this.quests = {
                    telegram: { completed: false, reward: 500 },
                    chat: { completed: false, reward: 1000 }
                };
                
                // Upgrades
                this.upgrades = {
                    click: { level: 0, cost: 1500, effect: 0 },
                    auto: { level: 0, cost: 15000, effect: 0 },
                    critical: { level: 0, cost: 7500, effect: 0 }
                };
                
                this.autoClickerInterval = null;
                this.tgWebApp = null;
            }
        }

        // Premium Game Class
        class PremiumClickerGame {
            constructor() {
                this.state = new GameState();
                this.translations = this.initializeTranslations();
                this.promoCodes = this.initializePromoCodes();
                this.audioContext = null;
                this.init();
            }
            
            initializeTranslations() {
                return {
                    ru: {
                        coins: "Монеты",
                        perClick: "За клик",
                        stars: "Звёзды",
                        questsTitle: "Система заданий",
                        questsDesc: "Выполняйте задания, чтобы получать эксклюзивные бонусы",
                        quest1: "Подписка на Telegram",
                        quest1Desc: "Подпишитесь на наш канал и получите бонусные монеты для старта",
                        quest2: "Вход в чат", 
                        quest2Desc: "Присоединитесь к нашему чату и получите эксклюзивный бонус",
                        joinTelegram: "Присоединиться",
                        joinChat: "Войти в чат",
                        dailyTitle: "Ежедневные награды",
                        dailyDesc: "Заходите ежедневно, чтобы получать увеличивающиеся награды!",
                        dailyAvailable: "Сегодняшняя награда доступна!",
                        claimDaily: "Получить награду",
                        tabClicker: "Кликер",
                        tabQuests: "Задания",
                        tabBonuses: "Бонусы",
                        tabUpgrades: "Улучшения",
                        tabPremium: "Звёзды",
                        settingsTitle: "Настройки",
                        languageLabel: "Язык интерфейса:",
                        soundLabel: "Звуковые эффекты:",
                        promoLabel: "Активация промокода:",
                        activatePromo: "Активировать промокод",
                        resetGame: "Сбросить игру",
                        gameSaved: "Игра сохранена!",
                        claimed: "Выполнено",
                        telegramSuccess: "Вы получили бонус за подписку!",
                        chatSuccess: "Вы получили бонус за вход в чат!",
                        upgradesTitle: "Улучшения",
                        upgradesDesc: "Улучшайте свои возможности для максимального увеличения дохода",
                        upgrade1: "Улучшение клика",
                        upgrade1Desc: "Увеличивает количество монет, получаемых за каждый клик",
                        upgrade2: "Автокликер",
                        upgrade2Desc: "Автоматически кликает за вас каждую секунду",
                        upgrade3: "Критический удар", 
                        upgrade3Desc: "Увеличивает шанс получить двойные монеты за каждый клик",
                        buyUpgrade: "Купить улучшение",
                        upgradeSuccess: "Улучшение успешно приобретено!",
                        notEnoughCoins: "Недостаточно монет для покупки!",
                        notEnoughStars: "Недостаточно звёзд для покупки!",
                        criticalHit: "КРИТИЧЕСКИЙ УДАР!",
                        autoClickerActive: "Автокликер активирован!",
                        noEnergy: "Недостаточно энергии! Восстановление через: ",
                        energyRestored: "Энергия полностью восстановлена!",
                        premiumShop: "Магазин Звёзд",
                        premiumDesc: "Покупайте уникальные предметы и мощные улучшения за звёзды",
                        item1: "Множитель тапа x2",
                        item1Desc: "Удваивает доход за каждый клик навсегда",
                        item2: "Золотой пакет",
                        item2Desc: "Мгновенно получайте +50,000 монет",
                        item3: "Бриллиантовая энергия",
                        item3Desc: "Бесконечная энергия на 24 часа",
                        item4: "Бустер кликов",
                        item4Desc: "+10 монет за клик на 12 часов",
                        item5: "Защита от потерь",
                        item5Desc: "Сохранение прогресса при сбросе игры",
                        item6: "Профессиональный кликер",
                        item6Desc: "+5 автокликеров навсегда",
                        buy: "Купить",
                        purchaseSuccess: "Покупка успешно завершена!",
                        tgStarsError: "Ошибка получения звёзд из Telegram",
                        starsUpdated: "Баланс звёзд обновлён!",
                        promoUsed: "Этот промокод уже использован",
                        promoInvalid: "Неверный промокод",
                        promoSuccess: "Промокод успешно активирован!",
                        resetConfirm: "Вы уверены, что хотите сбросить игру? Весь прогресс будет потерян!",
                        resetCancel: "Сброс отменен",
                        energyRecharge: "Энергия восстановлена: +",
                        maxLevelReached: "Максимальный уровень достигнут!",
                        welcomeBack: "С возвращением! Ваш прогресс загружен.",
                        newPlayer: "Добро пожаловать! Начните кликать по монете для заработка."
                    },
                    en: {
                        coins: "Coins",
                        perClick: "Per click", 
                        stars: "Stars",
                        questsTitle: "Quest System",
                        questsDesc: "Complete quests to get exclusive bonuses",
                        quest1: "Subscribe to Telegram",
                        quest1Desc: "Subscribe to our channel and get bonus coins to start",
                        quest2: "Join the Chat",
                        quest2Desc: "Join our chat and get an exclusive bonus",
                        joinTelegram: "Join",
                        joinChat: "Join Chat",
                        dailyTitle: "Daily Rewards", 
                        dailyDesc: "Come daily to get increasing rewards!",
                        dailyAvailable: "Today's reward is available!",
                        claimDaily: "Claim Reward",
                        tabClicker: "Clicker",
                        tabQuests: "Quests",
                        tabBonuses: "Bonuses",
                        tabUpgrades: "Upgrades", 
                        tabPremium: "Stars",
                        settingsTitle: "Settings",
                        languageLabel: "Interface Language:",
                        soundLabel: "Sound Effects:",
                        promoLabel: "Promo Code Activation:",
                        activatePromo: "Activate Promo Code",
                        resetGame: "Reset Game",
                        gameSaved: "Game saved!",
                        claimed: "Claimed",
                        telegramSuccess: "You got bonus for subscription!",
                        chatSuccess: "You got bonus for joining chat!",
                        upgradesTitle: "Upgrades",
                        upgradesDesc: "Upgrade your abilities for maximum income",
                        upgrade1: "Click Upgrade",
                        upgrade1Desc: "Increases coins earned per click",
                        upgrade2: "Auto Clicker",
                        upgrade2Desc: "Automatically clicks for you every second",
                        upgrade3: "Critical Hit",
                        upgrade3Desc: "Increases chance to get double coins per click", 
                        buyUpgrade: "Buy Upgrade",
                        upgradeSuccess: "Upgrade purchased successfully!",
                        notEnoughCoins: "Not enough coins for purchase!",
                        notEnoughStars: "Not enough stars for purchase!",
                        criticalHit: "CRITICAL HIT!",
                        autoClickerActive: "Auto clicker activated!",
                        noEnergy: "Not enough energy! Recharge in: ",
                        energyRestored: "Energy fully restored!",
                        premiumShop: "Stars Shop",
                        premiumDesc: "Buy unique items and powerful upgrades with stars",
                        item1: "Tap Multiplier x2",
                        item1Desc: "Doubles income per click forever",
                        item2: "Gold Pack", 
                        item2Desc: "Instantly get +50,000 coins",
                        item3: "Diamond Energy",
                        item3Desc: "Unlimited energy for 24 hours",
                        item4: "Click Booster",
                        item4Desc: "+10 coins per click for 12 hours",
                        item5: "Loss Protection",
                        item5Desc: "Save progress on game reset",
                        item6: "Auto Clicker Pro",
                        item6Desc: "+5 auto clickers forever",
                        buy: "Buy",
                        purchaseSuccess: "Purchase completed successfully!",
                        tgStarsError: "Error getting stars from Telegram",
                        starsUpdated: "Stars balance updated!",
                        promoUsed: "This promo code has already been used",
                        promoInvalid: "Invalid promo code", 
                        promoSuccess: "Promo code activated successfully!",
                        resetConfirm: "Are you sure you want to reset the game? All progress will be lost!",
                        resetCancel: "Reset cancelled",
                        energyRecharge: "Energy restored: +",
                        maxLevelReached: "Maximum level reached!",
                        welcomeBack: "Welcome back! Your progress has been loaded.",
                        newPlayer: "Welcome! Start clicking the coin to earn money."
                    }
                };
            }
            
            initializePromoCodes() {
                return {
                    "GOLDENSTART": { coins: 1000, message: {ru: "Стартовый бонус: +1000 монет!", en: "Starting bonus: +1000 coins!"} },
                    "CLICKER": { perClick: 1, message: {ru: "Бонус: +1 монета за клик!", en: "Bonus: +1 coin per click!"} },
                    "CRYPTO": { coins: 5000, message: {ru: "Крипто бонус: +5000 монет!", en: "Crypto bonus: +5000 coins!"} },
                    "PREMIUM": { coins: 10000, stars: 5, message: {ru: "Премиум бонус: +10000 монет и 5 звёзд!", en: "Premium bonus: +10000 coins and 5 stars!"} },
                    "ENERGY": { energy: 500, message: {ru: "Энергетический бонус: +500 энергии!", en: "Energy bonus: +500 energy!"} }
                };
            }
            
            init() {
                this.setupEventListeners();
                this.loadGame();
                this.initTelegramWebApp();
                this.createParticles();
                this.startEnergyRecharge();
                this.updateUI();
                
                // Show appropriate welcome message
                if (this.state.totalCoins > 0) {
                    this.showNotification(this.translate('welcomeBack'));
                } else {
                    this.showNotification(this.translate('newPlayer'));
                }
            }
            
            // Core Game Methods
            handleCoinClick(event) {
                if (this.state.energy <= 0) {
                    const timeToRecharge = this.calculateEnergyRechargeTime();
                    this.showNotification(this.translate('noEnergy') + timeToRecharge);
                    return;
                }
                
                let baseCoins = this.state.perClick + this.state.upgrades.click.effect;
                let isCritical = false;
                
                // Critical hit chance
                if (Math.random() < (this.state.upgrades.critical.effect / 100)) {
                    baseCoins = Math.floor(baseCoins * 2.5);
                    isCritical = true;
                    this.state.criticalHits++;
                    this.playSound('critical');
                    document.getElementById('coin').classList.add('coin-spin');
                    setTimeout(() => document.getElementById('coin').classList.remove('coin-spin'), 1000);
                    this.showNotification(this.translate('criticalHit'));
                } else {
                    this.playSound('click');
                }
                
                const coinsEarned = baseCoins * this.state.tapMultiplier;
                this.state.coins += coinsEarned;
                this.state.totalCoins += coinsEarned;
                this.state.energy--;
                
                this.updateUI();
                this.createClickAnimation(event, coinsEarned, isCritical);
                
                // Coin animation
                const coin = document.getElementById('coin');
                coin.style.transform = 'scale(0.95) rotate(15deg)';
                setTimeout(() => {
                    coin.style.transform = 'scale(1) rotate(0)';
                }, 100);
                
                // Auto-save every 30 seconds
                if (Date.now() - this.state.lastSave > 30000) {
                    this.saveGame();
                    this.showSaveNotice();
                    this.state.lastSave = Date.now();
                }
            }
            
            buyUpgrade(type) {
                const upgrade = this.state.upgrades[type];
                
                if (this.state.coins >= upgrade.cost) {
                    this.state.coins -= upgrade.cost;
                    
                    switch (type) {
                        case 'click':
                            upgrade.level++;
                            upgrade.effect += 1;
                            upgrade.cost = Math.floor(upgrade.cost * 2.2);
                            break;
                        case 'auto':
                            upgrade.level++;
                            upgrade.effect += 1;
                            upgrade.cost = Math.floor(upgrade.cost * 2.8);
                            this.startAutoClicker();
                            this.showNotification(this.translate('autoClickerActive'));
                            break;
                        case 'critical':
                            upgrade.level++;
                            upgrade.effect += 1;
                            upgrade.cost = Math.floor(upgrade.cost * 3.5);
                            break;
                    }
                    
                    this.playSound('upgrade');
                    this.updateUI();
                    this.saveGame();
                    this.showNotification(this.translate('upgradeSuccess'));
                } else {
                    this.showNotification(this.translate('notEnoughCoins'));
                }
            }
            
            startAutoClicker() {
                if (this.state.autoClickerInterval) {
                    clearInterval(this.state.autoClickerInterval);
                }
                
                this.state.autoClickerInterval = setInterval(() => {
                    if (this.state.upgrades.auto.effect > 0 && this.state.energy > 0) {
                        const autoCoins = (this.state.perClick + this.state.upgrades.click.effect) * 
                                        this.state.upgrades.auto.effect * this.state.tapMultiplier;
                        this.state.coins += autoCoins;
                        this.state.totalCoins += autoCoins;
                        this.state.energy -= this.state.upgrades.auto.effect;
                        this.updateUI();
                    }
                }, 1000);
            }
            
            // Energy System
            startEnergyRecharge() {
                setInterval(() => {
                    if (this.state.energy < this.state.maxEnergy) {
                        const rechargeRate = Math.floor(this.state.maxEnergy / 200); // 5 minutes to full recharge
                        const oldEnergy = this.state.energy;
                        this.state.energy = Math.min(this.state.energy + rechargeRate, this.state.maxEnergy);
                        
                        if (oldEnergy < this.state.energy) {
                            this.updateEnergyBar();
                            
                            // Show notification when fully recharged
                            if (this.state.energy === this.state.maxEnergy && oldEnergy < this.state.maxEnergy) {
                                this.showNotification(this.translate('energyRestored'));
                            }
                        }
                    }
                }, 1500); // Check every 1.5 seconds
            }
            
            calculateEnergyRechargeTime() {
                const missingEnergy = this.state.maxEnergy - this.state.energy;
                const rechargeRate = Math.floor(this.state.maxEnergy / 200);
                const secondsNeeded = Math.ceil(missingEnergy / rechargeRate) * 1.5;
                
                if (secondsNeeded < 60) {
                    return `${secondsNeeded} сек`;
                } else {
                    return `${Math.ceil(secondsNeeded / 60)} мин`;
                }
            }
            
            // Telegram Integration
            initTelegramWebApp() {
                try {
                    this.state.tgWebApp = window.Telegram.WebApp;
                    
                    // Expand the app to full height
                    this.state.tgWebApp.expand();
                    
                    // Set theme parameters
                    this.state.tgWebApp.setHeaderColor('#0f2027');
                    this.state.tgWebApp.setBackgroundColor('#0f2027');
                    
                    // Setup main button
                    this.state.tgWebApp.MainButton
                        .setText(this.translate('buy'))
                        .show()
                        .onClick(() => {
                            this.state.tgWebApp.openInvoice('https://t.me/gifteverydayyy', (status) => {
                                if (status === 'paid') {
                                    this.updateStarsBalance();
                                    this.showNotification(this.translate('purchaseSuccess'));
                                }
                            });
                        });
                    
                    this.updateStarsBalance();
                    
                } catch (e) {
                    console.log('Telegram Web App not available, running in standalone mode');
                }
            }
            
            updateStarsBalance() {
                if (!this.state.tgWebApp) return;
                
                // In a real app, this would make an API call to your backend
                setTimeout(() => {
                    // Simulate getting stars balance
                    this.state.telegramStars = Math.floor(Math.random() * 150) + 50;
                    this.updateUI();
                    this.saveGame();
                    this.showNotification(this.translate('starsUpdated'));
                }, 1000);
            }
            
            // UI Updates
            updateUI() {
                // Format numbers with commas
                const formatNumber = (num) => num.toLocaleString();
                
                document.getElementById('coins').textContent = formatNumber(Math.floor(this.state.coins));
                document.getElementById('per-click').textContent = formatNumber(
                    (this.state.perClick + this.state.upgrades.click.effect) * this.state.tapMultiplier
                );
                document.getElementById('stars').textContent = formatNumber(this.state.telegramStars);
                document.getElementById('critical-hits').textContent = formatNumber(this.state.criticalHits);
                document.getElementById('total-coins').textContent = formatNumber(Math.floor(this.state.totalCoins));
                document.getElementById('tg-stars-balance').textContent = formatNumber(this.state.telegramStars);
                
                // Update upgrade costs and effects
                document.getElementById('click-upgrade-cost').textContent = formatNumber(this.state.upgrades.click.cost);
                document.getElementById('click-upgrade-effect').textContent = this.state.upgrades.click.effect;
                document.getElementById('auto-clicker-cost').textContent = formatNumber(this.state.upgrades.auto.cost);
                document.getElementById('auto-clicker-effect').textContent = this.state.upgrades.auto.effect;
                document.getElementById('critical-upgrade-cost').textContent = formatNumber(this.state.upgrades.critical.cost);
                document.getElementById('critical-upgrade-effect').textContent = this.state.upgrades.critical.effect;
                
                // Update button states
                document.getElementById('buy-click-btn').disabled = this.state.coins < this.state.upgrades.click.cost;
                document.getElementById('buy-auto-btn').disabled = this.state.coins < this.state.upgrades.auto.cost;
                document.getElementById('buy-critical-btn').disabled = this.state.coins < this.state.upgrades.critical.cost;
                
                this.updateEnergyBar();
                this.updateQuestButtons();
                this.checkDailyReward();
            }
            
            updateEnergyBar() {
                const percent = (this.state.energy / this.state.maxEnergy) * 100;
                document.getElementById('energy-fill').style.width = `${percent}%`;
                document.getElementById('energy-text').textContent = 
                    `${Math.floor(this.state.energy)}/${this.state.maxEnergy}`;
            }
            
            updateQuestButtons() {
                const telegramBtn = document.getElementById('telegram-btn');
                const chatBtn = document.getElementById('chat-btn');
                
                if (this.state.quests.telegram.completed) {
                    telegramBtn.disabled = true;
                    telegramBtn.innerHTML = `<i class="fas fa-check"></i> <span class="lang-claimed">${this.translate('claimed')}</span>`;
                    document.getElementById('telegram-quest').classList.add('completed');
                }
                
                if (this.state.quests.chat.completed) {
                    chatBtn.disabled = true;
                    chatBtn.innerHTML = `<i class="fas fa-check"></i> <span class="lang-claimed">${this.translate('claimed')}</span>`;
                    document.getElementById('chat-quest').classList.add('completed');
                }
            }
            
            // Daily Rewards System
            checkDailyReward() {
                const now = Date.now();
                const lastRewardDate = new Date(this.state.lastDailyReward);
                const currentDate = new Date();
                
                const dailyBtn = document.getElementById('daily-btn');
                const dailyStatus = document.getElementById('daily-status');
                
                if (this.state.lastDailyReward === 0 || 
                    currentDate.getDate() !== lastRewardDate.getDate() || 
                    currentDate.getMonth() !== lastRewardDate.getMonth() ||
                    currentDate.getFullYear() !== lastRewardDate.getFullYear()) {
                    
                    dailyBtn.disabled = false;
                    dailyStatus.textContent = this.translate('dailyAvailable');
                    dailyStatus.style.color = "var(--accent-color)";
                } else {
                    dailyBtn.disabled = true;
                    dailyStatus.textContent = this.state.language === 'ru' ? 
                        "Сегодня вы уже получили награду. Завтра приходите снова!" : 
                        "You've already claimed today's reward. Come back tomorrow!";
                    dailyStatus.style.color = "#ff6b6b";
                }
                
                this.updateDailyRewardsVisual();
            }
            
            updateDailyRewardsVisual() {
                for (let i = 1; i <= 5; i++) {
                    const dayEl = document.getElementById(`day${i}`);
                    dayEl.classList.remove('active', 'claimed');
                    
                    if (this.state.currentDay >= i) {
                        dayEl.classList.add('claimed');
                    } else if (this.state.currentDay === i - 1) {
                        dayEl.classList.add('active');
                    }
                }
            }
            
            claimDailyBonus() {
                const rewards = [100, 250, 500, 1000, 2000];
                const reward = rewards[Math.min(this.state.currentDay, rewards.length - 1)];
                
                this.state.coins += reward;
                this.state.totalCoins += reward;
                this.playSound('reward');
                
                this.showNotification(
                    this.state.language === 'ru' ? 
                    `🎉 Получена ежедневная награда: ${reward.toLocaleString()} монет!` : 
                    `🎉 Daily reward claimed: ${reward.toLocaleString()} coins!`
                );
                
                this.state.lastDailyReward = Date.now();
                this.state.currentDay = Math.min(this.state.currentDay + 1, 4);
                
                this.updateUI();
                this.saveGame();
                this.checkDailyReward();
            }
            
            // Quest System
            completeQuest(quest) {
                if (!this.state.quests[quest].completed) {
                    const reward = this.state.quests[quest].reward;
                    this.state.coins += reward;
                    this.state.totalCoins += reward;
                    this.state.quests[quest].completed = true;
                    
                    this.playSound('reward');
                    this.showNotification(
                        this.state.language === 'ru' ? 
                        `✅ Задание выполнено! Получено ${reward.toLocaleString()} монет!` : 
                        `✅ Quest completed! Received ${reward.toLocaleString()} coins!`
                    );
                    
                    this.updateQuestButtons();
                    this.updateUI();
                    this.saveGame();
                }
            }
            
            // Premium Shop
            buyItem(itemId, price) {
                if (this.state.telegramStars < price) {
                    this.showNotification(this.translate('notEnoughStars'));
                    return;
                }
                
                this.state.telegramStars -= price;
                this.playSound('purchase');
                
                switch (itemId) {
                    case 'tap-multiplier':
                        this.state.tapMultiplier = 2;
                        this.showNotification(this.state.language === 'ru' ? 
                            "🎯 Множитель тапа x2 активирован!" : 
                            "🎯 Tap multiplier x2 activated!"
                        );
                        break;
                    case 'gold-pack':
                        this.state.coins += 50000;
                        this.showNotification(this.state.language === 'ru' ? 
                            "💰 +50,000 монет зачислены на счет!" : 
                            "💰 +50,000 coins added to your account!"
                        );
                        break;
                    case 'energy-boost':
                        this.state.maxEnergy = 1000000;
                        this.state.energy = this.state.maxEnergy;
                        this.showNotification(this.state.language === 'ru' ? 
                            "⚡ Бесконечная энергия активирована на 24 часа!" : 
                            "⚡ Infinite energy activated for 24 hours!"
                        );
                        break;
                    case 'click-booster':
                        this.state.perClick += 10;
                        this.showNotification(this.state.language === 'ru' ? 
                            "🚀 Бустер кликов активирован на 12 часов!" : 
                            "🚀 Click booster activated for 12 hours!"
                        );
                        break;
                    case 'protection':
                        this.showNotification(this.state.language === 'ru' ? 
                            "🛡️ Защита от потерь активирована!" : 
                            "🛡️ Loss protection activated!"
                        );
                        break;
                    case 'auto-clicker-pro':
                        this.state.upgrades.auto.effect += 5;
                        this.showNotification(this.state.language === 'ru' ? 
                            "🤖 +5 автокликеров добавлено!" : 
                            "🤖 +5 auto clickers added!"
                        );
                        this.startAutoClicker();
                        break;
                }
                
                this.updateUI();
                this.saveGame();
                this.showNotification(this.translate('purchaseSuccess'));
            }
            
            // Promo Codes
            activatePromo() {
                const promoInput = document.getElementById('promo-input');
                const promoCode = promoInput.value.trim().toUpperCase();
                
                if (!promoCode) {
                    this.showPromoResult(
                        this.state.language === 'ru' ? 
                        "Пожалуйста, введите промокод" : 
                        "Please enter promo code", 
                        false
                    );
                    return;
                }
                
                if (this.state.usedPromoCodes.includes(promoCode)) {
                    this.showPromoResult(this.translate('promoUsed'), false);
                    return;
                }
                
                if (this.promoCodes[promoCode]) {
                    const bonus = this.promoCodes[promoCode];
                    
                    if (bonus.coins) {
                        this.state.coins += bonus.coins;
                        this.state.totalCoins += bonus.coins;
                    }
                    if (bonus.perClick) {
                        this.state.perClick += bonus.perClick;
                    }
                    if (bonus.stars) {
                        this.state.telegramStars += bonus.stars;
                    }
                    if (bonus.energy) {
                        this.state.energy = Math.min(this.state.energy + bonus.energy, this.state.maxEnergy);
                    }
                    
                    this.state.usedPromoCodes.push(promoCode);
                    this.showPromoResult(bonus.message[this.state.language], true);
                    this.playSound('reward');
                    this.updateUI();
                    this.saveGame();
                } else {
                    this.showPromoResult(this.translate('promoInvalid'), false);
                }
                
                promoInput.value = '';
            }
            
            // Language System
            changeLanguage() {
                const languageSelect = document.getElementById('language-select');
                this.state.language = languageSelect.value;
                this.saveGame();
                this.updateLanguage();
                
                this.showNotification(
                    this.state.language === 'ru' ? 
                    "🌐 Язык изменен на русский" : 
                    "🌐 Language changed to English"
                );
            }
            
            updateLanguage() {
                const lang = this.translations[this.state.language];
                document.querySelectorAll('[class^="lang-"]').forEach(el => {
                    const key = el.className.replace('lang-', '');
                    if (lang[key]) {
                        el.textContent = lang[key];
                    }
                });
                
                // Update promo input placeholder
                document.getElementById('promo-input').placeholder = 
                    this.state.language === 'ru' ? "Введите промокод..." : "Enter promo code...";
                
                // Update Telegram main button if available
                if (this.state.tgWebApp) {
                    this.state.tgWebApp.MainButton.setText(this.translate('buy'));
                }
            }
            
            translate(key) {
                return this.translations[this.state.language][key] || key;
            }
            
            // Sound System
            initAudio() {
                try {
                    this.audioContext = new (window.AudioContext || window.webkitAudioContext)();
                } catch (e) {
                    console.log('Web Audio API not supported');
                }
            }
            
            playSound(type) {
                if (!this.state.soundEnabled || !this.audioContext) return;
                
                try {
                    const oscillator = this.audioContext.createOscillator();
                    const gainNode = this.audioContext.createGain();
                    
                    oscillator.connect(gainNode);
                    gainNode.connect(this.audioContext.destination);
                    
                    switch (type) {
                        case 'click':
                            oscillator.frequency.setValueAtTime(800, this.audioContext.currentTime);
                            gainNode.gain.setValueAtTime(0.1, this.audioContext.currentTime);
                            gainNode.gain.exponentialRampToValueAtTime(0.01, this.audioContext.currentTime + 0.1);
                            oscillator.start();
                            oscillator.stop(this.audioContext.currentTime + 0.1);
                            break;
                        case 'critical':
                            oscillator.frequency.setValueAtTime(400, this.audioContext.currentTime);
                            oscillator.frequency.exponentialRampToValueAtTime(1200, this.audioContext.currentTime + 0.3);
                            gainNode.gain.setValueAtTime(0.2, this.audioContext.currentTime);
                            gainNode.gain.exponentialRampToValueAtTime(0.01, this.audioContext.currentTime + 0.3);
                            oscillator.start();
                            oscillator.stop(this.audioContext.currentTime + 0.3);
                            break;
                        case 'upgrade':
                            oscillator.frequency.setValueAtTime(600, this.audioContext.currentTime);
                            oscillator.frequency.exponentialRampToValueAtTime(1000, this.audioContext.currentTime + 0.2);
                            gainNode.gain.setValueAtTime(0.15, this.audioContext.currentTime);
                            gainNode.gain.exponentialRampToValueAtTime(0.01, this.audioContext.currentTime + 0.2);
                            oscillator.start();
                            oscillator.stop(this.audioContext.currentTime + 0.2);
                            break;
                        case 'reward':
                            oscillator.frequency.setValueAtTime(1000, this.audioContext.currentTime);
                            oscillator.frequency.exponentialRampToValueAtTime(600, this.audioContext.currentTime + 0.3);
                            gainNode.gain.setValueAtTime(0.2, this.audioContext.currentTime);
                            gainNode.gain.exponentialRampToValueAtTime(0.01, this.audioContext.currentTime + 0.3);
                            oscillator.start();
                            oscillator.stop(this.audioContext.currentTime + 0.3);
                            break;
                        case 'purchase':
                            const times = [0, 0.1, 0.2, 0.3];
                            const frequencies = [523.25, 659.25, 783.99, 1046.50]; // C, E, G, C
                            
                            times.forEach((time, index) => {
                                oscillator.frequency.setValueAtTime(frequencies[index], this.audioContext.currentTime + time);
                            });
                            
                            gainNode.gain.setValueAtTime(0.2, this.audioContext.currentTime);
                            gainNode.gain.exponentialRampToValueAtTime(0.01, this.audioContext.currentTime + 0.4);
                            oscillator.start();
                            oscillator.stop(this.audioContext.currentTime + 0.4);
                            break;
                    }
                } catch (e) {
                    console.log('Error playing sound:', e);
                }
            }
            
            toggleSound(enabled) {
                this.state.soundEnabled = enabled;
                if (enabled && !this.audioContext) {
                    this.initAudio();
                }
                this.saveGame();
            }
            
            // Visual Effects
            createParticles() {
                const cryptoParticles = document.getElementById('crypto-particles');
                cryptoParticles.innerHTML = '';
                
                for (let i = 0; i < 25; i++) {
                    const particle = document.createElement('div');
                    particle.classList.add('particle');
                    particle.style.width = `${Math.random() * 12 + 3}px`;
                    particle.style.height = particle.style.width;
                    particle.style.left = `${Math.random() * 100}%`;
                    particle.style.animationDuration = `${Math.random() * 15 + 10}s`;
                    particle.style.animationDelay = `${Math.random() * 5}s`;
                    
                    // Random color from theme
                    const colors = [
                        'rgba(102, 126, 234, 0.7)',
                        'rgba(0, 242, 254, 0.7)',
                        'rgba(245, 87, 108, 0.7)',
                        'rgba(150, 201, 61, 0.7)'
                    ];
                    particle.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    
                    cryptoParticles.appendChild(particle);
                }
            }
            
            createClickAnimation(event, amount, isCritical) {
                let x, y;
                
                if (event.touches && event.touches[0]) {
                    x = event.touches[0].clientX;
                    y = event.touches[0].clientY;
                } else {
                    x = event.clientX;
                    y = event.clientY;
                }
                
                const anim = document.createElement('div');
                anim.className = 'coin-click' + (isCritical ? ' critical' : '');
                anim.textContent = `+${amount.toLocaleString()}`;
                anim.style.left = `${x}px`;
                anim.style.top = `${y}px`;
                
                document.body.appendChild(anim);
                
                setTimeout(() => {
                    anim.remove();
                }, 1800);
            }
            
            // Notifications
            showNotification(text) {
                const notification = document.getElementById('notification');
                notification.textContent = text;
                notification.classList.add('show');
                
                setTimeout(() => {
                    notification.classList.remove('show');
                }, 3000);
            }
            
            showSaveNotice() {
                const saveNotice = document.getElementById('save-notice');
                saveNotice.classList.add('show');
                
                setTimeout(() => {
                    saveNotice.classList.remove('show');
                }, 2000);
            }
            
            showPromoResult(text, success) {
                const promoResult = document.getElementById('promo-result');
                promoResult.textContent = text;
                promoResult.className = 'promo-result ' + (success ? 'promo-success' : 'promo-error');
                promoResult.style.display = 'block';
                
                setTimeout(() => {
                    promoResult.style.display = 'none';
                }, 5000);
            }
            
            // Data Persistence
            saveGame() {
                const gameData = {
                    coins: this.state.coins,
                    perClick: this.state.perClick,
                    level: this.state.level,
                    upgrades: this.state.upgrades,
                    lastDailyReward: this.state.lastDailyReward,
                    currentDay: this.state.currentDay,
                    criticalHits: this.state.criticalHits,
                    totalCoins: this.state.totalCoins,
                    energy: this.state.energy,
                    maxEnergy: this.state.maxEnergy,
                    language: this.state.language,
                    usedPromoCodes: this.state.usedPromoCodes,
                    tapMultiplier: this.state.tapMultiplier,
                    quests: this.state.quests,
                    telegramStars: this.state.telegramStars,
                    soundEnabled: this.state.soundEnabled,
                    lastEnergyUpdate: this.state.lastEnergyUpdate
                };
                
                try {
                    localStorage.setItem('fgBotPremiumSave', JSON.stringify(gameData));
                } catch (e) {
                    console.error('Failed to save game:', e);
                }
            }
            
            loadGame() {
                try {
                    const savedData = localStorage.getItem('fgBotPremiumSave');
                    
                    if (savedData) {
                        const gameData = JSON.parse(savedData);
                        
                        // Load all properties, with fallbacks
                        this.state.coins = gameData.coins || 0;
                        this.state.perClick = gameData.perClick || 1;
                        this.state.level = gameData.level || 1;
                        this.state.lastDailyReward = gameData.lastDailyReward || 0;
                        this.state.currentDay = gameData.currentDay || 0;
                        this.state.criticalHits = gameData.criticalHits || 0;
                        this.state.totalCoins = gameData.totalCoins || 0;
                        this.state.energy = gameData.energy || 1000;
                        this.state.maxEnergy = gameData.maxEnergy || 1000;
                        this.state.language = gameData.language || 'ru';
                        this.state.usedPromoCodes = gameData.usedPromoCodes || [];
                        this.state.tapMultiplier = gameData.tapMultiplier || 1;
                        this.state.telegramStars = gameData.telegramStars || 0;
                        this.state.soundEnabled = gameData.soundEnabled !== undefined ? gameData.soundEnabled : true;
                        this.state.lastEnergyUpdate = gameData.lastEnergyUpdate || Date.now();
                        
                        // Load upgrades with fallbacks
                        this.state.upgrades = gameData.upgrades || {
                            click: { level: 0, cost: 1500, effect: 0 },
                            auto: { level: 0, cost: 15000, effect: 0 },
                            critical: { level: 0, cost: 7500, effect: 0 }
                        };
                        
                        // Load quests with fallbacks
                        this.state.quests = gameData.quests || {
                            telegram: { completed: false, reward: 500 },
                            chat: { completed: false, reward: 1000 }
                        };
                        
                        // Start auto-clicker if needed
                        if (this.state.upgrades.auto.level > 0) {
                            this.startAutoClicker();
                        }
                        
                        // Update language selector
                        document.getElementById('language-select').value = this.state.language;
                        this.updateLanguage();
                        
                        // Initialize audio if sound is enabled
                        if (this.state.soundEnabled) {
                            this.initAudio();
                        }
                    }
                } catch (e) {
                    console.error('Failed to load game:', e);
                }
            }
            
            resetGame() {
                if (confirm(this.translate('resetConfirm'))) {
                    localStorage.removeItem('fgBotPremiumSave');
                    location.reload();
                } else {
                    this.showNotification(this.translate('resetCancel'));
                }
            }
            
            // Event Listeners Setup
            setupEventListeners() {
                // Coin click
                const coinContainer = document.getElementById('coin-container');
                coinContainer.addEventListener('click', (e) => this.handleCoinClick(e));
                coinContainer.addEventListener('touchstart', (e) => {
                    e.preventDefault();
                    this.handleCoinClick(e);
                }, { passive: false });
                
                // Navigation tabs
                document.querySelectorAll('.tab').forEach(tab => {
                    tab.addEventListener('click', () => {
                        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                        document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                        
                        tab.classList.add('active');
                        document.getElementById(tab.dataset.tab).classList.add('active');
                        
                        // Show/hide stats based on active tab
                        const statsContainer = document.getElementById('stats-container');
                        if (tab.dataset.tab === 'clicker') {
                            statsContainer.style.display = 'flex';
                        } else {
                            statsContainer.style.display = 'none';
                        }
                    });
                });
                
                // Buttons
                document.getElementById('daily-btn').addEventListener('click', () => this.claimDailyBonus());
                document.getElementById('settings-btn').addEventListener('click', () => {
                    document.getElementById('settings-modal').classList.add('active');
                });
                document.getElementById('close-settings').addEventListener('click', () => {
                    document.getElementById('settings-modal').classList.remove('active');
                });
                document.getElementById('promo-btn').addEventListener('click', () => this.activatePromo());
                document.getElementById('reset-btn').addEventListener('click', () => this.resetGame());
                document.getElementById('language-select').addEventListener('change', () => this.changeLanguage());
                
                // Sound controls
                document.getElementById('sound-on').addEventListener('click', () => this.toggleSound(true));
                document.getElementById('sound-off').addEventListener('click', () => this.toggleSound(false));
                
                // Quest buttons
                document.getElementById('telegram-btn').addEventListener('click', () => {
                    window.open('https://t.me/gifteverydayyy', '_blank');
                    this.showNotification(this.translate('telegramSuccess'));
                    this.completeQuest('telegram');
                });
                
                document.getElementById('chat-btn').addEventListener('click', () => {
                    this.showNotification(this.translate('chatSuccess'));
                    this.completeQuest('chat');
                });
                
                // Upgrade buttons
                document.getElementById('buy-click-btn').addEventListener('click', () => this.buyUpgrade('click'));
                document.getElementById('buy-auto-btn').addEventListener('click', () => this.buyUpgrade('auto'));
                document.getElementById('buy-critical-btn').addEventListener('click', () => this.buyUpgrade('critical'));
                
                // Premium shop items
                document.querySelectorAll('.buy-item').forEach(button => {
                    button.addEventListener('click', (e) => {
                        const shopItem = e.target.closest('.shop-item');
                        const itemId = shopItem.dataset.id;
                        const price = parseInt(shopItem.dataset.price);
                        this.buyItem(itemId, price);
                    });
                });
                
                // Close modal when clicking outside
                document.getElementById('settings-modal').addEventListener('click', (e) => {
                    if (e.target === document.getElementById('settings-modal')) {
                        document.getElementById('settings-modal').classList.remove('active');
                    }
                });
                
                // Handle desktop detection
                this.checkMobileEnvironment();
            }
            
            checkMobileEnvironment() {
                const isTelegram = navigator.userAgent.includes('Telegram');
                const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
                
                if (!isTelegram && !isMobile) {
                    document.getElementById('desktop-block').classList.add('show');
                }
            }
        }

        // Initialize the game when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            window.game = new PremiumClickerGame();
        });

        // Service Worker registration for PWA (optional)
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then(registration => {
                        console.log('SW registered: ', registration);
                    })
                    .catch(registrationError => {
                        console.log('SW registration failed: ', registrationError);
                    });
            });
        }
    </script>
</body>
</html>
